{"ast":null,"code":"var _jsxFileName = \"/Users/omarfares/Desktop/Go/source-front/src/components/Login.js\";\nimport React, { Component, Fragment } from \"react\";\nimport Input from \"./form-components/Input\";\nimport Alert from \"./ui-components/Alert\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = evt => {\n      let value = evt.target.value;\n      let name = evt.target.name;\n      this.setState(prevState => ({ ...prevState,\n        [name]: value\n      }));\n    };\n\n    this.handleSubmit = evt => {\n      evt.preventDefault();\n      let errors = [];\n\n      if (this.state.email === \"\") {\n        errors.push(\"email\");\n      }\n\n      if (this.state.password === \"\") {\n        errors.push(\"password\");\n      }\n\n      this.setState({\n        errors: errors\n      });\n\n      if (errors.length > 0) {\n        return false;\n      }\n\n      const data = new FormData(evt.target);\n      const payload = Object.fromEntries(data.entries());\n      const requestOptions = {\n        method: \"POST\",\n        body: JSON.stringify(payload)\n      };\n      fetch(\"http://localhost:4000/v1/signin\", requestOptions).then(response => response.json()).then(data => {\n        if (data.error) {\n          this.setState({\n            alert: {\n              type: \"alert-danger\",\n              message: data.error.message\n            }\n          });\n        } else {\n          console.log(data);\n          this.handleJWTChange(Object.values(data)[0]);\n          window.localStorage.setItem(\"jwt\", JSON.stringify(Object.values(data)[0]));\n          this.props.history.push({\n            pathname: \"/admin\"\n          });\n        }\n      });\n    };\n\n    this.state = {\n      email: \"\",\n      password: \"\",\n      error: null,\n      errors: [],\n      alert: {\n        type: \"d-none\",\n        message: \"\"\n      }\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleJWTChange(jwt) {\n    this.props.handleJWTChange(jwt);\n  }\n\n  hasError(key) {\n    return this.state.errors.indexOf(key) !== -1;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Alert, {\n        alertType: this.state.alert.type,\n        alertMessage: this.state.alert.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"pt-3\",\n        onSubmit: this.handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(Input, {\n          title: \"Email\",\n          type: \"email\",\n          name: \"email\",\n          handleChange: this.handleChange,\n          className: this.hasError(\"email\") ? \"is-invalid\" : \"\",\n          errorDiv: this.hasError(\"email\") ? \"text-danger\" : \"d-none\",\n          errorMsg: \"Please enter a valid email address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          title: \"Password\",\n          type: \"password\",\n          name: \"password\",\n          handleChange: this.handleChange,\n          className: this.hasError(\"password\") ? \"is-invalid\" : \"\",\n          errorDiv: this.hasError(\"password\") ? \"text-danger\" : \"d-none\",\n          errorMsg: \"Please enter a password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/omarfares/Desktop/Go/source-front/src/components/Login.js"],"names":["React","Component","Fragment","Input","Alert","Login","constructor","props","handleChange","evt","value","target","name","setState","prevState","handleSubmit","preventDefault","errors","state","email","push","password","length","data","FormData","payload","Object","fromEntries","entries","requestOptions","method","body","JSON","stringify","fetch","then","response","json","error","alert","type","message","console","log","handleJWTChange","values","window","localStorage","setItem","history","pathname","bind","jwt","hasError","key","indexOf","render"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport Input from \"./form-components/Input\";\nimport Alert from \"./ui-components/Alert\";\n\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      email: \"\",\n      password: \"\",\n      error: null,\n      errors: [],\n      alert: {\n        type: \"d-none\",\n        message: \"\",\n      },\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange = (evt) => {\n    let value = evt.target.value;\n    let name = evt.target.name;\n    this.setState((prevState) => ({\n      ...prevState,\n      [name]: value,\n    }));\n  };\n\n  handleSubmit = (evt) => {\n    evt.preventDefault();\n\n    let errors = [];\n\n    if (this.state.email === \"\") {\n        errors.push(\"email\");\n    }\n\n    if (this.state.password === \"\") {\n        errors.push(\"password\");\n    }\n\n    this.setState({errors: errors});\n\n    if (errors.length > 0) {\n        return false;\n    }\n\n    const data = new FormData(evt.target);\n    const payload = Object.fromEntries(data.entries());\n\n    const requestOptions = {\n        method: \"POST\",\n        body: JSON.stringify(payload),\n    }\n\n    fetch(\"http://localhost:4000/v1/signin\", requestOptions)\n        .then((response) => response.json())\n        .then((data) => {\n            if (data.error) {\n                this.setState({\n                    alert: {\n                        type: \"alert-danger\",\n                        message: data.error.message,\n                    }\n                })\n            } else {\n                console.log(data);\n                this.handleJWTChange(Object.values(data)[0]);\n                window.localStorage.setItem(\"jwt\", JSON.stringify(Object.values(data)[0]));\n                this.props.history.push({\n                    pathname: \"/admin\",\n                })\n            }\n        })\n\n  };\n\n  handleJWTChange(jwt) {\n      this.props.handleJWTChange(jwt);\n  }\n\n  hasError(key) {\n    return this.state.errors.indexOf(key) !== -1;\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <h2>Login</h2>\n        <hr />\n        <Alert\n          alertType={this.state.alert.type}\n          alertMessage={this.state.alert.message}\n        />\n\n        <form className=\"pt-3\" onSubmit={this.handleSubmit}>\n          <Input\n            title={\"Email\"}\n            type={\"email\"}\n            name={\"email\"}\n            handleChange={this.handleChange}\n            className={this.hasError(\"email\") ? \"is-invalid\" : \"\"}\n            errorDiv={this.hasError(\"email\") ? \"text-danger\" : \"d-none\"}\n            errorMsg={\"Please enter a valid email address\"}\n          />\n\n          <Input\n            title={\"Password\"}\n            type={\"password\"}\n            name={\"password\"}\n            handleChange={this.handleChange}\n            className={this.hasError(\"password\") ? \"is-invalid\" : \"\"}\n            errorDiv={this.hasError(\"password\") ? \"text-danger\" : \"d-none\"}\n            errorMsg={\"Please enter a password\"}\n          />\n\n          <hr />\n          <button className=\"btn btn-primary\">Login</button>\n        </form>\n      </Fragment>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}